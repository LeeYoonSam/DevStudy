# ViewStubμ„ μ‚¬μ©ν•΄ λ³Έ μ μ΄ μμΌλ©°, μ΄λ¥Ό μ‚¬μ©ν•μ—¬ UI μ„±λ¥μ„ μ–΄λ–»κ² μµμ ν™”ν•λ‚μ”?

**ViewStub**μ€ λ μ΄μ•„μ›ƒμ΄ λ…μ‹μ μΌλ΅ ν•„μ”ν•΄μ§ λ•κΉμ§€ ν•΄λ‹Ή **λ μ΄μ•„μ›ƒμ μΈν”λ μ΄μ…(inflation, μ „κ°)μ„ μ§€μ—°**μ‹ν‚¤λ” λ° μ‚¬μ©λλ” **κ²½λ‰μ λ³΄μ΄μ§€ μ•λ” μλ¦¬ ν‘μ‹μ λ·°(placeholder view)** μ…λ‹λ‹¤. μ•±μ μƒλ…μ£ΌκΈ° λ™μ• μ¦‰μ‹ λλ” μ „ν€ ν•„μ”ν•μ§€ μ•μ„ μ μλ” λ·°λ¥Ό μΈν”λ μ΄νΈν•λ” μ¤λ²„ν—¤λ“λ¥Ό ν”Όν•¨μΌλ΅μ¨ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¤λ” λ° μμ£Ό μ‚¬μ©λ©λ‹λ‹¤.

### ViewStubμ μ£Όμ” νΉμ§•

* **κ²½λ‰μ„± (Lightweight):** ViewStubμ€ μΈν”λ μ΄νΈλ  λ•κΉμ§€ λ μ΄μ•„μ›ƒ κ³µκ°„μ„ μ°¨μ§€ν•κ±°λ‚ λ¦¬μ†μ¤λ¥Ό μ†λΉ„ν•μ§€ μ•μΌλ―€λ΅ λ©”λ¨λ¦¬ μ‚¬μ© κ³µκ°„(footprint)μ΄ μµμ†ν™”λ λ§¤μ° κ°€λ²Όμ΄ λ·°μ…λ‹λ‹¤.
* **μ§€μ—°λ μΈν”λ μ΄μ… (Delayed Inflation):** ViewStubμ— μ§€μ •λ μ‹¤μ  λ μ΄μ•„μ›ƒμ€ `inflate()` λ©”μ„λ“κ°€ νΈμ¶λκ±°λ‚ ViewStubμ΄ λ³΄μ΄κ² λ  λ•λ§ μΈν”λ μ΄νΈλ©λ‹λ‹¤.
* **μΌνμ© (One-Time Use):** μΌλ‹¨ μΈν”λ μ΄νΈλλ©΄, ViewStubμ€ λ·° κ³„μΈµ κµ¬μ΅°μ—μ„ μΈν”λ μ΄νΈλ λ μ΄μ•„μ›ƒμΌλ΅ λ€μ²΄λλ©° μ¬μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤.

### ViewStubμ μΌλ°μ μΈ μ‚¬μ© μ‚¬λ΅€

* **μ΅°κ±΄λ¶€ λ μ΄μ•„μ›ƒ (Conditional Layouts):**
    μ¤λ¥ λ©”μ‹μ§€, μ§„ν–‰λ¥  ν‘μ‹μ¤„(progress bars) λλ” μ„ νƒμ  UI μ”μ†μ™€ κ°™μ΄ μ΅°κ±΄μ— λ”°λΌ ν‘μ‹λλ” λ μ΄μ•„μ›ƒμ— μ΄μƒμ μ…λ‹λ‹¤.
* **μ΄κΈ° λ΅λ“ μ‹κ°„ λ‹¨μ¶• (Reducing Initial Load Time):**
    λ³µμ΅ν•κ±°λ‚ λ¦¬μ†μ¤κ°€ λ§μ΄ λ“λ” λ·°μ μΈν”λ μ΄μ…μ„ μ§€μ—°μ‹ν‚΄μΌλ΅μ¨, ViewStubμ€ μ•΅ν‹°λΉ„ν‹°λ‚ ν”„λκ·Έλ¨ΌνΈμ μ΄κΈ° λ λ”λ§ μ‹κ°„μ„ κ°μ„ ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.
* **λ™μ  UI μ”μ† (Dynamic UI Elements):**
    ν•„μ”ν•  λ•λ§ ν™”λ©΄μ— λ™μ  μ½ν…μΈ λ¥Ό μ¶”κ°€ν•λ” λ° μ‚¬μ©λ  μ μμ–΄ λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ μµμ ν™”ν•©λ‹λ‹¤.

### ViewStub μ‚¬μ© λ°©λ²•

ViewStubμ€ XML λ μ΄μ•„μ›ƒμ—μ„ μΈν”λ μ΄νΈν•  λ μ΄μ•„μ›ƒ λ¦¬μ†μ¤λ¥Ό κ°€λ¦¬ν‚¤λ” μ†μ„±κ³Ό ν•¨κ» μ •μλ©λ‹λ‹¤.

**activity\_main.xml**
```xml
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="λ©”μΈ μ½ν…μΈ " />

    <ViewStub
        android:id="@+id/viewStub"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout="@layout/optional_content" /> </LinearLayout>
```

**ViewStub μΈν”λ μ΄νΈν•κΈ°**
```kotlin
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val viewStub = findViewById<ViewStub>(R.id.viewStub)

        // ν•„μ”ν•  λ• λ μ΄μ•„μ›ƒ μΈν”λ μ΄νΈ
        // viewStub.visibility = View.VISIBLE // μ΄λ ‡κ² ν•΄λ„ μΈν”λ μ΄νΈλ¨
        val inflatedView: View = viewStub.inflate() // λ…μ‹μ μΌλ΅ μΈν”λ μ΄νΈν•κ³  μ°Έμ΅° λ°ν™

        // μΈν”λ μ΄νΈλ λ μ΄μ•„μ›ƒμ—μ„ λ·° μ ‘κ·Ό
        val optionalTextView = inflatedView.findViewById<TextView>(R.id.optionalText)
        optionalTextView.text = "μΈν”λ μ΄νΈλ μ½ν…μΈ "
    }
}
```

### ViewStubμ μ¥μ 

* **μµμ ν™”λ μ„±λ¥ (Optimized Performance):**
    ν•­μƒ λ³΄μ΄μ§€ μ•μ„ μ μλ” λ·°μ μƒμ„±μ„ μ§€μ—°μ‹μΌ λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ μ¤„μ΄κ³  μ΄κΈ° λ λ”λ§ μ„±λ¥μ„ ν–¥μƒμ‹ν‚µλ‹λ‹¤.
* **λ‹¨μν™”λ λ μ΄μ•„μ›ƒ κ΄€λ¦¬ (Simplified Layout Management):**
    ν”„λ΅κ·Έλλ° λ°©μ‹μΌλ΅ λ·°λ¥Ό μλ™μΌλ΅ μ¶”κ°€ν•κ±°λ‚ μ κ±°ν•μ§€ μ•κ³ λ„ μ„ νƒμ  UI μ”μ†λ¥Ό μ‰½κ² κ΄€λ¦¬ν•  μ μκ² ν•©λ‹λ‹¤.
* **μ‚¬μ© μ©μ΄μ„± (Ease of Use):**
    κ°„λ‹¨ν• APIμ™€ XML ν†µν•©μ€ ViewStubμ„ κ°λ°μμ—κ² νΈλ¦¬ν• λ„κµ¬λ΅ λ§λ“­λ‹λ‹¤.

### ViewStubμ μ ν• μ‚¬ν•­

* **μΌνμ© (Single-Use):**
    μΌλ‹¨ μΈν”λ μ΄νΈλλ©΄ ViewStubμ€ λ·° κ³„μΈµμ—μ„ μ κ±°λλ©° μ¬μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤. λ‹¤μ‹ ν•„μ”ν•λ©΄ ν•΄λ‹Ή λ·°λ¥Ό μ¨κΈ°κ±°λ‚ λ‹¤μ‹ ViewStubμ„ μ‚¬μ©ν•λ” λ μ΄μ•„μ›ƒ κµ¬μ΅°λ¥Ό κ³ λ ¤ν•΄μ•Ό ν•©λ‹λ‹¤.
* **μ ν•λ μ μ–΄ (Limited Control):**
    μλ¦¬ ν‘μ‹μμ΄λ―€λ΅ μΈν”λ μ΄νΈλ  λ•κΉμ§€ μ‚¬μ©μ μƒνΈμ‘μ©μ„ μ²λ¦¬ν•κ±°λ‚ λ³µμ΅ν• μ‘μ—…μ„ μν–‰ν•  μ μ—†μµλ‹λ‹¤.

## μ”μ•½

ViewStubμ€ ν•„μ”ν•  λ•κΉμ§€ λ μ΄μ•„μ›ƒμ μΈν”λ μ΄μ…μ„ μ§€μ—°μ‹μΌ μ„±λ¥μ„ μµμ ν™”ν•λ” μ•λ“λ΅μ΄λ“μ μ μ©ν• λ„κµ¬μ…λ‹λ‹¤. νΉν μ΅°κ±΄λ¶€ λ μ΄μ•„μ›ƒμ΄λ‚ ν•­μƒ ν•„μ”ν•μ§€λ” μ•μ€ λ·°μ— μ μ©ν•λ©°, λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ μ¤„μ΄κ³  μ•± λ°μ‘μ„±μ„ ν–¥μƒμ‹ν‚¤λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤. ViewStubμ„ μ¬λ°”λ¥΄κ² μ‚¬μ©ν•λ©΄ λ” ν¨μ¨μ μ΄κ³  κ°„μ†ν™”λ μ‚¬μ©μ κ²½ν—μ„ λ§λ“¤ μ μμµλ‹λ‹¤.

---

## Q. ViewStubμ΄ μΈν”λ μ΄νΈλ  λ• μ–΄λ–¤ μΌμ΄ λ°μƒν•λ©°, μ΄κ²ƒμ΄ λ μ΄μ•„μ›ƒ μ„±λ¥ λ° λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μΈ΅λ©΄μ—μ„ λ·° κ³„μΈµ κµ¬μ΅°μ— μ–΄λ–¤ μν–¥μ„ λ―ΈμΉλ‚μ”?

`ViewStub`μ΄ μΈν”λ μ΄νΈ(inflate)λ  λ•, ν•΄λ‹Ή `ViewStub` μμ²΄λ” λ·° κ³„μΈµ κµ¬μ΅°μ—μ„ μ κ±°λκ³ , κ·Έ μλ¦¬μ— `ViewStub`μ— `android:layout` μ†μ„±μΌλ΅ μ§€μ •λμ—λ λ μ΄μ•„μ›ƒ νμΌμ΄ μ‹¤μ λ΅ μΈν”λ μ΄νΈλμ–΄ λ·° κ³„μΈµμ— μ¶”κ°€λ©λ‹λ‹¤. μ΄ κ³Όμ •μ€ **μΌνμ„±**μΌλ΅, ν•λ² μΈν”λ μ΄νΈλ `ViewStub`μ€ λ” μ΄μƒ μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤.

μ΄κ²ƒμ΄ λ μ΄μ•„μ›ƒ μ„±λ¥κ³Ό λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ— λ―ΈμΉλ” μν–¥μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

### ViewStub μΈν”λ μ΄νΈ μ‹ λ°μƒν•λ” μΌ

1.  **μλ¦¬ ν‘μ‹μ(Placeholder) μ κ±°:** `ViewStub` κ°μ²΄λ” λ¶€λ¨ `ViewGroup`μ—μ„ μμ‹ μ„ μ κ±°ν•©λ‹λ‹¤.
2.  **μ§€μ •λ λ μ΄μ•„μ›ƒ μΈν”λ μ΄νΈ:** `ViewStub`μ `android:layout` μ†μ„±μ— μ •μλ XML λ μ΄μ•„μ›ƒ λ¦¬μ†μ¤κ°€ μ‹¤μ  λ·° κ°μ²΄λ“¤λ΅ μΈν”λ μ΄νΈλ©λ‹λ‹¤. μ΄ κ³Όμ •μ—μ„ ν•΄λ‹Ή XML λ‚΄μ λ¨λ“  λ·°κ°€ μΈμ¤ν„΄μ¤ν™”λκ³  μ΄κΈ°ν™”λ©λ‹λ‹¤.
3.  **λ·° κ³„μΈµμ— μ¶”κ°€:** μƒλ΅­κ² μΈν”λ μ΄νΈλ λ·°(λ“¤) (μΌλ°μ μΌλ΅ ν•λ‚μ λ£¨νΈ λ·°μ™€ κ·Έ μμ‹λ“¤)κ°€ μ›λ `ViewStub`μ΄ μλ μ„μΉμ—, λ™μΌν• λ μ΄μ•„μ›ƒ νλΌλ―Έν„°(`LayoutParams`)λ¥Ό μ‚¬μ©ν•μ—¬ λ¶€λ¨ `ViewGroup`μ— μ¶”κ°€λ©λ‹λ‹¤.
4.  **ID ν• λ‹Ή:**
    * λ§μ•½ `ViewStub`μ— `android:inflatedId` μ†μ„±μ΄ μ§€μ •λμ–΄ μμ—λ‹¤λ©΄, μΈν”λ μ΄νΈλ λ μ΄μ•„μ›ƒμ λ£¨νΈ λ·°λ” μ΄ IDλ¥Ό κ°–κ² λ©λ‹λ‹¤.
    * `android:inflatedId`κ°€ μ—†λ‹¤λ©΄, μΈν”λ μ΄νΈλ λ μ΄μ•„μ›ƒμ λ£¨νΈ λ·°λ” μ›λ `ViewStub`μ `android:id`λ¥Ό μƒμ†λ°›μµλ‹λ‹¤.
5.  **μΈν”λ μ΄νΈλ λ·° λ°ν™:** `viewStub.inflate()` λ©”μ„λ“λ” μΈν”λ μ΄νΈλ λ μ΄μ•„μ›ƒμ λ£¨νΈ λ·°λ¥Ό λ°ν™ν•©λ‹λ‹¤. μ΄ν›„ μ΄ μ°Έμ΅°λ¥Ό μ‚¬μ©ν•μ—¬ ν•΄λ‹Ή λ·° λλ” κ·Έ μμ‹ λ·°λ“¤μ— μ ‘κ·Όν•  μ μμµλ‹λ‹¤.
6.  **ViewStub μ†λ©Έ:** `ViewStub` κ°μ²΄ μμ²΄λ” λ·° κ³„μΈµμ—μ„ μ™„μ „ν μ‚¬λΌμ§€λ©°, λ” μ΄μƒ μ΅΄μ¬ν•μ§€ μ•μΌλ―€λ΅ μ¬μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤.

### λ μ΄μ•„μ›ƒ μ„±λ¥ λ° λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ— λ―ΈμΉλ” μν–¥

#### π“ λ μ΄μ•„μ›ƒ μ„±λ¥

* **μ΄κΈ° λ΅λ”© μ‹ μ„±λ¥ ν–¥μƒ:**
    * `ViewStub`μ€ μΈν”λ μ΄νΈλκΈ° μ „κΉμ§€λ” μ‹¤μ  λ·°κ°€ μ•„λ‹λ―€λ΅ μΈ΅μ •(measure) λ° λ μ΄μ•„μ›ƒ(layout) λ‹¨κ³„μ—μ„ κ±°μ λΉ„μ©μ΄ λ“¤μ§€ μ•μµλ‹λ‹¤. ν¬κΈ°λ„ μ—†κ³  κ·Έλ¦¬μ§€λ„ μ•κΈ° λ•λ¬Έμ— μ΄κΈ° ν™”λ©΄ κµ¬μ„± μ‹ λ·° κ³„μΈµ κµ¬μ΅°κ°€ λ” λ‹¨μν•κ³  κ°€λ²Όμ›μ Έ **μ΄κΈ° λ λ”λ§ μ†λ„κ°€ λΉ¨λΌμ§‘λ‹λ‹¤.** νΉν `ViewStub`μ— μ •μλ λ μ΄μ•„μ›ƒμ΄ λ³µμ΅ν•κ±°λ‚ λ§μ€ λ·°λ¥Ό ν¬ν•¨ν•  κ²½μ° μ΄ ν¨κ³Όλ” λ”μ± μ»¤μ§‘λ‹λ‹¤.

* **μΈν”λ μ΄νΈ μ‹μ μ λΉ„μ©:**
    * `inflate()` λ©”μ„λ“κ°€ νΈμ¶λλ” μ‹μ μ—λ” μ§€μ •λ λ μ΄μ•„μ›ƒμ„ μ‹¤μ λ΅ μΈν”λ μ΄νΈν•κ³  λ·° κ³„μΈµμ— μ¶”κ°€ν•λ” μ‘μ—…μΌλ΅ μΈν•΄ **μΌνμ„± λΉ„μ©μ΄ λ°μƒ**ν•©λ‹λ‹¤. μ΄ κ³Όμ •μ—λ” XML νμ‹±, λ·° κ°μ²΄ μƒμ„±, μƒλ΅μ΄ ν•μ„ κ³„μΈµμ— λ€ν• μΈ΅μ • λ° λ μ΄μ•„μ›ƒ ν¨μ¤κ°€ ν¬ν•¨λ©λ‹λ‹¤. λ§μ•½ μΈν”λ μ΄νΈλλ” λ μ΄μ•„μ›ƒμ΄ λ§¤μ° λ³µμ΅ν•λ‹¤λ©΄ μ΄ μ‹μ μ—μ„ μ•½κ°„μ UI μ§€μ—°(jank)μ΄ λ°μƒν•  μ μμµλ‹λ‹¤.

* **μΈν”λ μ΄νΈ ν›„ μ„±λ¥:**
    * μΌλ‹¨ μΈν”λ μ΄νΈλλ©΄, μƒλ΅­κ² μ¶”κ°€λ λ·°λ“¤μ€ μΌλ°μ μΈ λ·°μ™€ λ™μΌν•κ² λ™μ‘ν•©λ‹λ‹¤. μ΄ν›„μ λ μ΄μ•„μ›ƒ μ„±λ¥μ— λ―ΈμΉλ” μν–¥μ€ ν•΄λ‹Ή λ·°λ“¤μ λ³µμ΅λ„μ™€ κµ¬μ΅°μ— λ”°λΌ λ‹¬λΌμ§‘λ‹λ‹¤. λ·° κ³„μΈµμ μ „μ²΄μ μΈ κΉμ΄λ” μΈν”λ μ΄μ… ν›„μ— μ¦κ°€ν•©λ‹λ‹¤.

#### π’Ύ λ©”λ¨λ¦¬ μ‚¬μ©λ‰

* **μ΄κΈ° λ©”λ¨λ¦¬ μ μ•½:**
    * `ViewStub` μμ²΄λ” λ§¤μ° μ μ€ λ©”λ¨λ¦¬λ§ μ°¨μ§€ν•©λ‹λ‹¤. `android:layout` μ†μ„±μ— μ§€μ •λ λ μ΄μ•„μ›ƒ λ‚΄μ λ·°λ“¤μ€ μ‹¤μ λ΅ μΈν”λ μ΄νΈλκΈ° μ „κΉμ§€λ” λ©”λ¨λ¦¬μ— **μ „ν€ λ΅λ“λμ§€ μ•μµλ‹λ‹¤.** λ”°λΌμ„ ν•΄λ‹Ή λ·°λ“¤μ΄ μ¦‰μ‹ ν•„μ”ν•μ§€ μ•κ±°λ‚, νΉμ • μ΅°κ±΄μ—μ„λ§ μ‚¬μ©λλ” κ²½μ° μƒλ‹Ήν• μ΄κΈ° λ©”λ¨λ¦¬λ¥Ό μ μ•½ν•  μ μμµλ‹λ‹¤.

* **μΈν”λ μ΄νΈ μ‹μ  λ° μ΄ν›„μ λ©”λ¨λ¦¬ μ‚¬μ©:**
    * `ViewStub`μ΄ μΈν”λ μ΄νΈλλ©΄, μƒλ΅μ΄ λ·° κ°μ²΄λ“¤μ΄ μƒμ„±λλ©΄μ„ ν•΄λ‹Ή λ·°λ“¤μ΄ ν•„μ”λ΅ ν•λ” λ§νΌμ λ©”λ¨λ¦¬λ¥Ό μ‚¬μ©ν•κ² λ©λ‹λ‹¤. `ViewStub` κ°μ²΄ μμ²΄λ” μ κ±°λλ―€λ΅ λ” μ΄μƒ λ©”λ¨λ¦¬λ¥Ό μ°¨μ§€ν•μ§€ μ•μµλ‹λ‹¤.

* **μ „λ°μ μΈ μν–¥:**
    * `ViewStub`μ μ£Όλ λ©”λ¨λ¦¬ μ΄μ μ€ λ·°λ“¤μ΄ μ‹¤μ λ΅ **ν•„μ”ν•΄μ§ λ•κΉμ§€ λ΅λ”©μ„ μ§€μ—°**μ‹ν‚¨λ‹¤λ” μ μ…λ‹λ‹¤. λ§μ•½ ν•΄λ‹Ή λ·°λ“¤μ΄ μ‚¬μ©μ μ„Έμ… λ™μ• μ „ν€ ν•„μ”ν•μ§€ μ•λ‹¤λ©΄, κ·Έλ§νΌμ λ©”λ¨λ¦¬κ°€ μ μ•½λλ” κ²ƒμ…λ‹λ‹¤. ν•„μ”μ— μν•΄ μΈν”λ μ΄νΈλλ©΄ κ·Έ μ‹μ λ¶€ν„° λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ΄ μ¦κ°€ν•©λ‹λ‹¤. μ¦‰, `ViewStub`μ€ λ©”λ¨λ¦¬ ν• λ‹Ή μ‹μ μ„ κ΄€λ¦¬ν•μ—¬ μ΄κΈ° λ©”λ¨λ¦¬ λ¶€λ‹΄μ„ μ¤„μ΄λ” λ° λ„μ›€μ„ μ¤λ‹λ‹¤.