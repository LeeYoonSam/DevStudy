# Pending Intent
- [Q. PendingIntent란 무엇이며 일반 Intent와 어떻게 다릅니까? PendingIntent를 사용해야 하는 시나리오를 제시해 주시겠습니까?](#q-pendingintent란-무엇이며-일반-intent와-어떻게-다릅니까-pendingintent를-사용해야-하는-시나리오를-제시해-주시겠습니까)

--- 

## Pending Intent 의 목적은 무엇인가요?

Pending Intent는 다른 애플리케이션 또는 시스템 구성 요소에 애플리케이션을 대신하여 나중에 미리 정의된 인텐트를 실행할 수 있는 기능을 부여하는 특별한 종류의 인텐트입니다. 이는 알림이나 서비스와의 상호 작용과 같이 앱의 수명 외에 트리거되어야 하는 작업에 특히 유용합니다.

### PendingIntent의 주요 특징

- PendingIntent는 일반 Intent의 래퍼 역할을 하여 앱의 수명 주기 이후에도 지속되도록 합니다. 
- Intent의 실행을 앱과 동일한 권한을 가진 다른 앱 또는 시스템 서비스에 위임합니다. 
- PendingIntent는 액티비티, 서비스 또는 브로드캐스트 수신기에 대해 생성될 수 있습니다.

**사용 사례**

- 알림: 사용자가 알림을 탭할 때 액티비티를 여는 것과 같은 작업을 허용합니다.
- 알람: AlarmManager를 사용하여 작업을 예약합니다.
- 서비스: 백그라운드 작업을 위해 ForegroundService 또는 BroadcastReceiver에 작업을 위임합니다.

### **보안 고려 사항**

항상 PendingIntents에 대해 FLAG_IMMUTABLE을 설정하여 악성 앱이 기본 Intent를 수정하는 것을 방지하십시오. 이는 특정 시나리오에서 FLAG_IMMUTABLE이 필수인 Android 12(API 레벨 31) 이후부터 특히 중요합니다.

### **요약**

- PendingIntent는 앱이 활발하게 실행되지 않을 때에도 앱과 시스템 구성 요소 또는 다른 앱 간의 원활한 통신을 가능하게 하는 Android의 핵심 메커니즘입니다. 
- 플래그와 권한을 신중하게 관리함으로써 지연된 작업의 안전하고 효율적인 실행을 보장할 수 있습니다.

### Q. PendingIntent란 무엇이며 일반 Intent와 어떻게 다릅니까? PendingIntent를 사용해야 하는 시나리오를 제시해 주시겠습니까?
`PendingIntent` (펜딩인텐트)는 일반 `Intent` (인텐트)와 다른 특별한 목적을 가진 인텐트입니다.

**1. PendingIntent란 무엇인가?**

`PendingIntent`는 `Intent` 객체를 감싸는(wrapping) 토큰 또는 참조입니다. 핵심 기능은 **미래의 특정 시점**에 **다른 애플리케이션**이 마치 **원래 앱의 권한**으로 감싸진 `Intent`를 실행할 수 있도록 허가하는 것입니다. 즉, `Intent` 실행을 즉시 하지 않고 '보류(pending)' 시켰다가 나중에 다른 주체(예: 시스템 서비스)에 의해 실행되도록 위임하는 객체입니다.

**2. 일반 Intent와의 차이점**

| 특징          | 일반 Intent (인텐트)                                 | PendingIntent (펜딩인텐트)                                                                 |
|---------------|---------------------------------------------------|--------------------------------------------------------------------------------------------|
| **실행 주체** | `Intent`를 생성한 앱 (자기 자신)                     | `PendingIntent`를 전달받은 다른 앱 또는 시스템 서비스 (예: NotificationManager, AlarmManager) |
| **실행 시점** | 생성 직후 즉시 실행 (`startActivity` 등 호출 시)   | 미래의 특정 시점 (예: 알람 시간 도달, 알림 클릭 시)                                          |
| **권한** | 실행하는 앱 자체의 권한으로 실행                      | **`PendingIntent`를 생성한 앱의 권한**으로 실행 (중요!)                                  |
| **목적** | 앱 내부 컴포넌트 호출, 다른 앱 기능 즉시 사용 등        | 다른 앱/서비스에게 미래의 `Intent` 실행 권한 위임                                               |
| **생존** | `Intent`를 보낸 앱 프로세스가 종료되면 의미 없음       | `PendingIntent`를 생성한 앱 프로세스가 종료되어도 시스템에 의해 유지되고 실행될 수 있음            |

**3. PendingIntent 사용 시나리오**

`PendingIntent`는 주로 내 앱이 아닌 다른 앱이나 시스템 서비스가 내 앱의 컴포넌트를 안전하게 실행해야 할 때 사용됩니다.

* **알림 (Notifications):** 사용자가 알림을 탭했을 때, NotificationManager 서비스가 `PendingIntent`를 사용하여 내 앱의 특정 액티비티(Activity)를 시작하거나 브로드캐스트를 보냅니다. 알림을 생성하는 시점에는 어떤 액티비티를 실행할지만 정의해두고, 실제 실행은 사용자가 탭하는 미래 시점에 NotificationManager가 대신 수행합니다.
* **알람 (AlarmManager):** 특정 시간에 또는 주기적으로 작업을 수행하도록 예약할 때 사용됩니다. AlarmManager 서비스는 예약된 시간이 되면 `PendingIntent`를 사용하여 내 앱의 서비스(Service)를 시작하거나 브로드캐스트를 보냅니다. 앱이 꺼져 있어도 알람 시간에 맞춰 동작을 실행할 수 있습니다.
* **앱 위젯 (App Widgets):** 홈 화면 위젯의 버튼 등을 클릭했을 때, 홈 화면 앱(런처)이 위젯을 제공한 앱이 미리 설정해 둔 `PendingIntent`를 실행하여 특정 액티비티를 시작하거나 서비스를 실행합니다.
* **지오펜싱 (Geofencing) / 액티비티 감지 (Activity Recognition):** 사용자의 위치 변경이나 액티비티 상태 변경(걷기, 운전 등)을 감지했을 때, 시스템의 위치 또는 액티비티 감지 서비스가 `PendingIntent`를 실행하여 앱에 해당 이벤트를 알립니다.

요약하자면, `PendingIntent`는 **미래 시점**에 **다른 애플리케이션**이 **내 애플리케이션의 권한**으로 특정 `Intent`를 실행하도록 위임해야 할 때 필수적으로 사용됩니다.
