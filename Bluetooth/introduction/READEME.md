# Bluetooth LE 란?

### 블루투스 클래식
- 무선 헤드셋과 같은 일반적인 품목에 널리 사용되어 이전에 사용했을 가능성이 가장 높은 블루투스 버전
- 음악 스트리밍과 같은 애플리케이션에 적합
- 데이터 처리량은 연결 문제나 패킷 손실 없이 지원할 수 있을 만큼 충분히 높을 뿐만 아니라 사용하기도 매우 쉬움
- 시간이 지나면 스마트폰과 무선 스피커를 충전필요

### 블루투스 저에너지(LE)
- 저전력 웨어러블이나 대규모 IoT 애플리케이션의 경우, 특히 빠른 데이터 전송 속도가 필요하지 않은 경우 배터리를 자주 충전하는 것은 불가능
- 블루투스 핵심 사양 버전 4.0부터 블루투스 SIG(Special Interest Group)는 저전력 IoT 애플리케이션을 위한 핵심 요소로 활용하기 위해 블루투스 저에너지(LE)를 도입

## Bluetooth LE 특징
Bluetooth LE는 이름에서 알 수 있듯이 데이터 전송률을 희생하여 낮은 에너지 소비를 달성하는 데 중점을 둡니다. 
여기서 데이터 속도를 희생한다는 것은 두 가지 메커니즘을 의미합니다. 

- 첫째, 데이터 패킷이 27바이트에서 251바이트로 더 작게 만들어집니다. 
- 둘째, 전력 소비의 중요한 요인인 긴 라디오 온 시간을 피하기 위해 데이터를 가능한 한 적게 전송합니다. 

따라서 Bluetooth LE는 최소한의 전력으로 작동하고 소량의 데이터만 전송해야 하는 **배터리 작동식 장치**에 더 적합합니다.

블루투스 LE는 지원되는 토폴로지 및 노드 유형 등 다른 측면에서도 블루투스 클래식과 다릅니다. 이는 Bluetooth LE가 Bluetooth 클래식과 완전히 다른 사용 사례를 위해 고안되었기 때문에 다른 네트워크 토폴로지가 필요하기 때문입니다.

요약 | 측정치
--- | ---
Operating band | 2400 MHz – 2483.5 MHz ~ 2.4 GHz
Channel bandwidth	| 2 MHz
Number of RF channels	| 40
Maximum transmit power	| 20 dBm / 0.1 W
Maximum application data throughput	| 1.4 Mbps
Maximum range at reduced data rates (125 & 500 kbps) | ~1000 m

### Bluetooth LE 장점
- Bluetooth 저에너지의 주요 장점은 다른 저전력 개인 영역 네트워크에 비해 비용이 저렴하여 대량 배포가 필요한 애플리케이션에 적합하다는 점입니다.
- 이 기술은 스마트폰에도 널리 보급되어 있어(대부분의 스마트폰은 블루투스 클래식과 블루투스 LE를 모두 지원) 어디서나 애플리케이션을 쉽게 테스트하고 프로토타입을 만들 수 있습니다. 양방향 통신을 테스트하려면 스마트폰 외에 Bluetooth LE 장치가 하나 더 필요합니다. 거의 모든 사람이 스마트폰을 가지고 있기 때문에 특정 하드웨어가 필요한 다른 기술에 비해 테스트에 필요한 비용과 복잡성을 줄일 수 있습니다.

## Bluetooth LE protocol stack
애플리케이션에서 Bluetooth LE를 활성화하고 사용하기 위해 프로토콜 스택의 모든 개별 계층에 대한 깊은 이해가 절대적으로 필요한 것은 아닙니다. 하지만 여러 계층의 기본 사항과 주요 기능 중 일부를 이해하면 Bluetooth LE 스택의 내부에서 어떤 일이 일어나고 있는지 파악하는 데 도움이 됩니다. 

아래는 프로토콜 스택 아키텍처를 보여 주며, 어떤 계층이 **Bluetooth LE 호스트**를 구성하고 어떤 계층이 **Bluetooth LE 컨트롤러**를 구성하는지 보여줍니다.


계층 | 설명
--- | ---
Application | 사용자가 API를 통해 블루투스 LE 프로토콜을 사용하기 위해 상호 작용하는 계층
Host | Bluetooth LE 장치가 서로 데이터를 저장하고 교환하는 방법을 결정
Controller | 하위 계층을 구성하며, 가장 눈에 띄는 부분은 전파를 생성하고 전송하려는 데이터로 신호를 인코딩하는 물리적 라디오

### Host
- Logical Link Control & Adaptation Protocol (L2CAP): 상위 계층에 데이터 캡슐화 서비스를 제공합니다.
- Security Manager Protocol (SMP): 보안 통신을 위한 방법을 정의하고 제공합니다.
- Attribute Protocol (ATT): 한 장치가 특정 데이터를 다른 장치에 노출할 수 있도록 합니다.
- Generic Attribute Profile (GATT): ATT 계층을 사용하는 데 필요한 하위 절차를 정의합니다.
- Generic Access Profile (GAP): 애플리케이션과 직접 인터페이스하여 장치 검색 및 연결 관련 서비스를 처리합니다.

### Controller
- Physical Layer (PHY): 실제 데이터가 전파로 변조되는 방식과 송수신 방법을 결정합니다.
- Link Layer (LL): 대기, 광고, 스캐닝, 시작, 연결 중 하나로 정의되는 무선 상태를 관리합니다.