# OS
- [프로세스](#프로세스)
- [문맥 교환(Context Switching)](#문맥-교환context-switching)
- [스레드](#스레드)

---

## 프로세스
> 운영체제에서 프로세스는 하나의 작업 단위이다.<br>
사용자가 마우스를 더블클릭하여 프로그램을 실행하면 그 프로그램은 프로세스가 된다. 이렇게 실행된 프로세스는 복잡한 과정을 거쳐 사용자가 지시한 작업을 마무리한다.

### 프로그램에서 프로세스로의 전환
- 프로세스는 컴퓨터 시스템의 작업 단위로 태스크(task) 라고도 부른다.
- 운영체제는 프로그램을 메모리의 적당한 위치로 가져온다.
- 프로세스 제어 블록에 프로세스를 처리하는 데 필요한 다양한 정보가 들어있다.
- 하나의 프로세스를 실행하려면 프로세스 구분자, 메모리 관련 정보, 프로그램 카운터와 각종 레지스터 같은 중간값을 관리해야 하며, 이러한 정보를 보관하는 데이터 구조가 프로세스 제어 블록이다.
- 프로그램이 프로세스가 되려면 메모리에 올라오는 것과 동시에 프로세스 제어 블록이 생성되어야 한다.

---

## 문맥 교환(Context Switching)
> 두 프로세스의 프로세스 제어 블록 및 이와 관련된 값들을 교환하는 작업을 말한다.<br>
일반적으로 문맥 교환은 한 프로세스가 자신에게 주어진 시간을 다 사용하면 발생하고, 인터럽트가 걸렸을 때도 발생한다.

---

## 스레드
스레드는 프로세스의 경량화 버젼으로, 한 애플리케이션 내에서 여러 개의 코드를 실행하는 것을 가능하게 해줍니다. 

하나의 애플리케이션은 하나의 프로세스를 가지고, 하나의 프로세스는 여러개의 스레드를 가질 수 있습니다. 이 여러개의 스레드는 개별적으로 돌면서 여러 작업들이 동시에(혹은 거의 동시에) 수행될 수 있도록 합니다. 

시스템은 이러한 스레드를 관리하며 가용한 코어에 스케쥴링합니다.

스레드는 기술적으로 시스템 레벨의 자료구조와 애플리케이션 레벨의 자료구조를 필요로 하는데, 시스템 레벨에서는 전체 스레드의 스케줄링 작업을 위한 데이터를 저장하기 위해 필요하고, 애플리케이션 레벨에서는 스레드 자체의 상태와 실행흐름을 저장하기 위해 필요합니다.

프로세스가 처음 실행될 때에는 1개의 스레드로 시작했다가(메인 스레드라고 합니다.), 필요에 따라 스레드가 생기나게 됩니다. 스레드는 각자가 별도의 시작 루틴을 가지고, 애플리케이션의 메인 루틴과 독립적으로 동작하게 됩니다.

### 스레드의 장단점
스레드가 가져다 줄 수 있는 이점은 크게 2가지가 있습니다.

1. 반응성을 향상 시킵니다 : 스레드가 하나라면 이 하나의 스레드가 사용자 입력에 반응하고,뷰를 업데이트하고, 네트워크 작업을 수행하는 등의 모든 작업들을 수행해야 합니다. 하나의 스레드는 한번에 하나의 작업만 할 수 있기 때문에, 이 작업들을 모두 수행하다보면 느려질 뿐 아니라 상태 변화에 기민하게 대응을 할 수 없어 앱이 뚝뚝 끊기는 현상을 겪게 됩니다. 여러 스레드가 일들을 나눠 가진다면, 좀 더 부드러운 앱 경험을 제공할 수 있습니다.

2. 멀티 코어 시스템에서 실제 성능 향상을 경험할 수 있습니다. 병렬적으로 수행될 수 있는 작업들을 여러 스레드에 나눠서 처리하게 함으로, 같은 일을 더 빠른 시간에 처리할 수 있게 됩니다.

### 프로세스와 스레드의 차이
- 개개의 프로세스와 스레드는 서로서로 미치는 영향이 다르다
- 프로세스끼리는 약하게 연결되어 있는 반면 스레드끼리는 강하게 연결되어 있다.

### 프로세스
- 각 프로세스는 약하게 연결되어 있어 서로의 작업이 큰 영향을 미치지 않는다.
- 우선 순위에 따라서 작업순서를 바꿀 수도 있다.

### 스레드
- 프로세스는 여러 개의 스레드로 구성되고 스레드끼리는 강하게 연결되어 있다.
- 작업은 여러개의 일로 구성되며 스레드의 실행 순서가 중요하게 작용 할 수 있다.
- 스레드는 프로세스 내부에서 서로 강하게 연결되어 있다.

### 스레드 관련 용어

**멀티스레드**
- 멀티스레드는 프로세스 내 작업을 여러 개의 스레드로 분할함으로써 작업의 부담을 줄이는 프로세스 운영 기법이다.

**멀티태스킹**
- 멀티태스킹은 운영체제가 CPU에 작업을 줄 때 시간을 잘게 나누어 배분하는 기법이다.
- 여러 스레드에 시간을 잘게 나누어주는 시스템을 시분할 시스템(time-sharing system) 이라고 한다.
- 시분할 시스템에서 운영체제가 CPU에 전달하는 작업은 프로세스가 아니라 스레드이다.

**멀티프로세싱**
- 멀티프로세싱은 CPU를 여러 개 사용하여 여러 개의 스레드를 동시에 처리하는 작업 환경을 말한다. 이는 병렬 처리에서의 슈퍼스칼라 기법과 같다.
- 멀티프로세싱은 하나의 컴퓨터에 여러 개의 CPU 혹은 하나의 CPU 내 여러 개의 코어에 스레드를 배정하는 동시에 작동하는 것이다.
- 네트워크로 연결된 여러 컴퓨터에 스레드를 나누어 협업하는 분산 시스템도 멀티프로세싱이라고 부른다.

**CPU 멀티스레드**
> CPU 멀티스레드는 한 번에 하나씩 처리해야 하는 스레드를 파이프라인 기법을 이용하여 동시에 여러 스레드를 처리하도록 만든 병럴 처리 기법이다.

- 멀티스레드: 운영체제가 소프트웨어적으로 프로세스를 작은 단위의 스레드로 분할하여 운영하는 기법
- CPU 멀티스레드: 하드웨어적인 방법으로 하나의 CPU에서 여러 스레드를 동시에 처리하는 병렬 처리 기법